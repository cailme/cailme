<!DOCTYPE html>
<html>
  <head>
  <title>
      
          Linux大作业 - Site Title
      
  </title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="author" content="龙雪亮 cailme" />
  <link rel="shortcut icon" type="image/x-icon" href="/img/favicon.ico">

  
  
  
  
  
  <link rel="stylesheet" href="/style.min.39acacc5d2051426f655a6b7fbf4786fbd0fd8fffd09322c9b497ef0f7439b3f.css" integrity="sha256-OaysxdIFFCb2Vaa3&#43;/R4b70P2P/9CTIsm0l&#43;8PdDmz8=">
  
  
  
  <link rel="stylesheet" href="/style-dark.min.0a647fb6c07e04b77b54fa0515d0a683d39ecdb251dba960fe1f966f7ff36fc2.css" media="(prefers-color-scheme: dark)" integrity="sha256-CmR/tsB&#43;BLd7VPoFFdCmg9OezbJR26lg/h&#43;Wb3/zb8I=">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.1/css/all.css">

  
  

  <meta property="og:title" content="Linux大作业" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/blog/homework/" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2022-12-11T21:31:06+08:00" />
<meta property="article:modified_time" content="2022-12-11T21:31:06+08:00" />

<meta itemprop="name" content="Linux大作业">
<meta itemprop="description" content=""><meta itemprop="datePublished" content="2022-12-11T21:31:06+08:00" />
<meta itemprop="dateModified" content="2022-12-11T21:31:06+08:00" />
<meta itemprop="wordCount" content="2370">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:image" content="/img/avatar.jpg"/>
<meta name="twitter:title" content="Linux大作业"/>
<meta name="twitter:description" content=""/>

  <!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
  <![endif]-->

  <!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
  <![endif]-->

  
  
</head>

  <body>
    
  <h1>Linux大作业</h1>
  <header>
  
  <div class="avatar">
    <img class="avatarMask" src="/img/avatar.jpg" alt="">
    <a href=""><img class="avatar-border" src="/img/avatar-border.svg" alt=""></a>
  </div>
  
  <h2><a class="author" href="">龙雪亮 cailme</a></h2>
</header>

  
  
  
  <p class="date">December 11, 2022</p>
  
  
  
  
  <div id="contentBody">
    <h1 id="linux大作业完成步骤记录">Linux大作业完成步骤记录</h1>
<h1 id="一使用docker将socket运行在的容器">一、使用Docker，将socket运行在的容器</h1>
<h2 id="1安装docker">1.安装docker</h2>
<p>1.安装docker，命令：<strong>sudo apt install docker.io</strong>
2.检查安装是否成功，命令：<strong>docker -v</strong></p>
<p><img src="https://huatu.98youxi.com/markdown/work/uploads/upload_5a1de971daf3d6c1cbd22af40c726180.png" alt=""></p>
<h2 id="2查看镜像">2.查看镜像</h2>
<p>启动docker，命令：<strong>service docker start</strong>， 查看镜像命令：<strong>docker images</strong>
安装Node.js后可以提交新的docker镜像实例，安装命令: <strong>apt install nodejs</strong>
提交新实例，命令: docker commit -m &ldquo;added Node.js&rdquo; -a  &ldquo;username&rdquo; &lt;容器ID&gt; &lt;镜像名&gt;
这里我已提交了两个基于ubuntu镜像的新镜像实例，分别为server-ubuntu、client-ubuntu</p>
<p><img src="https://huatu.98youxi.com/markdown/work/uploads/upload_549729238aa92fb2759f5375567d03e6.png" alt=""></p>
<h2 id="3查看容器">3.查看容器</h2>
<p>使用命令：<strong>docker ps -a</strong>，可以查看已有的所有容器(不加-a,仅查看正在运行的)</p>
<p><img src="https://huatu.98youxi.com/markdown/work/uploads/upload_eb57d0c7727b72e1b9cd7b5f6f60b1c6.png" alt=""></p>
<h2 id="3运行容器编写socket并测试">3.运行容器，编写socket并测试</h2>
<p>1.运行容器可以使用镜像创建新的容器，命令：<strong>docker run -it &lt;容器名&gt;</strong>
2.也可以进入已有的容器
首先重启容器，命令：<strong>docker restart &lt;容器ID\容器名&gt;</strong>
然后进入正在运行的容器，命令：<strong>docker attach 容器ID</strong>
运行文件，命令：<strong>python3 ./文件名</strong></p>
<p><img src="https://huatu.98youxi.com/markdown/work/uploads/upload_0cec1877ca6877f445c94673c77b601c.png" alt=""></p>
<h2 id="4服务端和客户端">4.服务端和客户端</h2>
<p>我使用python语言编写socket</p>
<blockquote>
<p>服务端 server.py
<img src="https://huatu.98youxi.com/markdown/work/uploads/upload_9dd14316afcf43bdc816dd4dca634c43.png" alt=""></p>
</blockquote>
<blockquote>
<p>客户端 client.py
<img src="https://huatu.98youxi.com/markdown/work/uploads/upload_432f808042cbda01c96f0846c72ef658.png" alt=""></p>
</blockquote>
<h2 id="5导出容器">5.导出容器</h2>
<p>导出容器至宿主机，命令：<strong>docker export 容器ID &gt; name.tar</strong>
<img src="https://huatu.98youxi.com/markdown/work/uploads/upload_88fbc1419bfc9a9b1384acdbf628c0b5.png" alt=""></p>
<h1 id="二hugo静态网站">二、Hugo静态网站</h1>
<h2 id="1安装hugo">1.安装hugo</h2>
<p>1.安装hugo，命令：<strong>sudo apt install hugo</strong>
2.检查安装是否成功，命令：<strong>hugo version</strong></p>
<p><img src="https://huatu.98youxi.com/markdown/work/uploads/upload_97dc8409ea8a9bd4f5ed2478181fdec4.png" alt=""></p>
<h2 id="2创建个人网站">2.创建个人网站</h2>
<h3 id="1创建个人网站命令hugo-new-site-myblog">1.创建个人网站，命令：<strong>hugo new site myblog</strong></h3>
<p>进入创建的 myblog 目录，克隆主题到 themes 文件命令：<strong>git clone <a href="https://github.com/nightswinger/hugo-theme-coyote.git">https://github.com/nightswinger/hugo-theme-coyote.git</a> themes/coyote &ndash;depth=1</strong></p>
<p><img src="https://huatu.98youxi.com/markdown/work/uploads/upload_50066bef05225739d1f413d98f9c457d.png" alt=""></p>
<h3 id="2配置config文件">2.配置config文件</h3>
<p>或者把模板中的congfig文件拷贝到网站根目录
命令：<strong>cp themes/kiera/exampleSite/config.toml ./</strong></p>
<p><img src="https://huatu.98youxi.com/markdown/work/uploads/upload_22ae1ff897b443225da57b73aac7b0cf.png" alt=""></p>
<h3 id="3创建blog">3.创建blog</h3>
<p>命令：<strong>hugo new posts/name.md</strong>； 编辑blog内容。</p>
<p><img src="https://huatu.98youxi.com/markdown/work/uploads/upload_89275fd3916548b9c96a4637edd7e224.png" alt=""></p>
<p><img src="https://huatu.98youxi.com/markdown/work/uploads/upload_f28aa109d8c894bab56d64efe63437ef.png" alt="">
<img src="https://huatu.98youxi.com/markdown/work/uploads/upload_f71d18c0bef211974e0bbceaf1f988a1.png" alt=""></p>
<h3 id="4网站预览">4.网站预览，</h3>
<p>对所有已发布和编辑中的文章进行预览，命令：<strong>hugo server -D</strong></p>
<p><img src="https://huatu.98youxi.com/markdown/work/uploads/upload_cd33e2a2fc1b9d042e51a94e49b1a7b5.png" alt="">
<img src="https://huatu.98youxi.com/markdown/work/uploads/upload_c5c004c363b575d085d83e09950bbb1c.png" alt="">
<img src="https://huatu.98youxi.com/markdown/work/uploads/upload_3b6f4990d05651b178ec080cfdd25596.png" alt="">
<img src="https://huatu.98youxi.com/markdown/work/uploads/upload_de09d617e3847310334f9283f8ba7bf5.png" alt=""></p>
<h3 id="5发布内容">5.发布内容</h3>
<p>写完文章，预览没问题后，可以更改文章的草稿状态 draft: false，然后编译生成静态网站内容了，命令：<strong>hugo -t theme-name</strong></p>
<p><img src="https://huatu.98youxi.com/markdown/work/uploads/upload_1d6efac15b254d3389e889d0f4fcd4c7.png" alt=""></p>
<p>生成的静态内容都在 public 目录下面：
<img src="https://huatu.98youxi.com/markdown/work/uploads/upload_6c48c3be1c153d5d0e70329355d695b0.png" alt=""></p>
<h2 id="3-部署到web服务器">3. 部署到Web服务器</h2>
<h3 id="1拷贝public">1.拷贝public</h3>
<p>将编译生成的publi目录中的所有文件，拷贝至/var/www/html/目录中
<img src="https://huatu.98youxi.com/markdown/work/uploads/upload_833e4ac6b1f63a08b20023dfd4419d35.png" alt=""></p>
<h3 id="2测试网页">2.测试网页</h3>
<p>启动ngin服务，访问Web服务器，测试可以正常访问，部署成功。
<img src="https://huatu.98youxi.com/markdown/work/uploads/upload_cb57b9b48bb2a09bf0e46f6d99cfad24.png" alt=""></p>
<h2 id="4docker部署静态网站">4.Docker部署静态网站</h2>
<h3 id="1在-docker-环境拉取-nginx-镜像">1.在 Docker 环境拉取 nginx 镜像</h3>
<p>拉取命令：<strong>docker pull nginx</strong>      查看是否安装成功：<strong>docker images</strong></p>
<p><img src="https://huatu.98youxi.com/markdown/work/uploads/upload_b4062c53956102f2ae169c66e83128ae.png" alt=""></p>
<h3 id="2新建并启动-nginx-容器">2.新建并启动 nginx 容器</h3>
<p>启动容器，命令:<strong>docker run &ndash;name mynginx -p 9999:80 -d nginx</strong></p>
<p>非首次进入容器要先重启容器，命令：<strong>docker restart 容器ID或者name</strong></p>
<p>然后再进入容器进入正在运行的容器，命令：<strong>docker attach 容器ID /bin/bash</strong></p>
<p>进入到一个初始化的环境，没有 apt-get，也没有 vi，需要重新安装。</p>
<p>备注：
9999:80：端口映射。真机通过9999端口来访问虚拟机中的 html，但 html 仍运行在虚拟机的80端口上
&ndash;name <newName>：给容器取名字
-v A:B ：挂载文件，将宿主机上的A文件挂载到B路径下。可以理解为：复制了一份A文件的副本到B路径下。（也就是把Linux本机上的文件，复制一份放到容器的路径下）</p>
<p><img src="https://huatu.98youxi.com/markdown/work/uploads/upload_63051f92f997050ca8f6a72ea14dd518.png" alt=""></p>
<h3 id="3编辑-nginx-配置文件">3.编辑 nginx 配置文件</h3>
<p>进入配置文件，命令： <strong>vim etc/nginx/conf.d/default.conf</strong>
root /usr/share/nginx/html 为你要访问的 html 所在路径</p>
<blockquote>
<p>进入文件后，按 i 进入编辑模式
按 esc 退出编辑模式（也称命令行模式）
在命令行模式下，按冒号进入底行模式；
在底行模式下
输入 wq：保存并退出
q!：不保存并强制退出
<img src="https://huatu.98youxi.com/markdown/work/uploads/upload_c5f67179ed1990280251323074aea657.png" alt=""></p>
</blockquote>
<h3 id="4-查看是否部署成功">4. 查看是否部署成功</h3>
<p>输入 exit 并回车，或直接按 ctrl+d 即可退出容器
重启容器，命令<strong>docker restart mynginx</strong>
使用真机进行访问，若出现下图界面则表示部署成功！
<img src="https://huatu.98youxi.com/markdown/work/uploads/upload_6f6f3784aefd45b9db7b89f03b7fdac6.png" alt=""></p>
<h3 id="5部署我们的网页">5.部署我们的网页</h3>
<p>将我们的网页文件拷贝到容器的/usr/share/nginx/html路径中
命令：<strong>docker cp  /var/www/html 47ced0308b10:/usr/share/nginx</strong></p>
<blockquote>
<p>备注：拷贝命令中不能出现通配符</p>
</blockquote>
<p>使用真机进行访问，若出现下图界面则表示部署成功！
<img src="https://huatu.98youxi.com/markdown/work/uploads/upload_b5c10653e91b344afa6521000f84cb2e.png" alt=""><br>
<img src="https://huatu.98youxi.com/markdown/work/uploads/upload_d26f0479679e7c1e3acd6aa79649e506.png" alt="">
<img src="https://huatu.98youxi.com/markdown/work/uploads/upload_eec48c736870a0cbca4b3d49335b5a3e.png" alt="">
<img src="https://huatu.98youxi.com/markdown/work/uploads/upload_8577b72d237a72f08aefa21c544c58c0.png" alt=""></p>
<h1 id="三作业相关代码">三、作业相关代码</h1>
<p>git绑定用户：
git config &ndash;global user.name &ldquo;cailme&rdquo;</p>
<p>git config &ndash;global user.email &ldquo;<a href="mailto:2424254068@qq.com">2424254068@qq.com</a>&rdquo;</p>
<p>初始化仓库：git init</p>
<p>提交上传至 GitHub：</p>
<p>cd homework</p>
<p>git init                     //把这个目录变成 Git可以管理的仓库</p>
<p>git add homework/test       //git add 后可以跟单个</p>
<p>git status</p>
<p>echo &ldquo;# 1&rdquo; &raquo; README.md</p>
<p>git add README.md</p>
<p>git commit -m &ldquo;first commit&rdquo;</p>
<p>git branch -M main</p>
<p>git remote add origin <a href="mailto:git@github.com">git@github.com</a>:cailme/name.git</p>
<p>git push -u origin main</p>
<p>非首次提交：</p>
<p>git remote add origin <a href="mailto:git@github.com">git@github.com</a>:cailme/cailme.git</p>
<p>git branch -M main</p>
<p>git push -u origin main</p>
<p>Docker容器：</p>
<p>查看已有镜像：docker images</p>
<p>删除已有镜像：docker rmi &lt;REPOSITORY(镜像名)&gt;<br>
#需要关闭使用此镜像运行的容器，才能删除容器</p>
<p>重启容器：docker restart &lt;CONTAINER ID(容器ID或者name)&gt;</p>
<p>停止容器：docker stop &lt;CONTAINER ID(容器ID或者name)&gt;</p>
<p>强行停止容器：docker kill &lt;CONTAINER ID(容器ID或者name)&gt;</p>
<p>删除已经停止的容器：docker rm &lt;CONTAINER ID(容器ID或者name)&gt;</p>
<p>查看所有容器：docker ps -a</p>
<p>进入正在运行的容器并且以命令行交互：
docker exec -it 容器ID bashShell 或者 docker attach 容器ID</p>
<p>从容器中拷贝文件到主机上：</p>
<p>docker cp 容器ID：容器内路径 目的主机路径</p>
<p>导出:docker export 容器ID &gt; abcd.tar</p>
<p>安装Node.js: apt install nodejs</p>
<p>运行容器：</p>
<p>docker run -it -p 60:60 server-ubuntu  （ID:8ce96564e511）</p>
<p>docker run -it  client-ubuntu    (ID:2760297a6a3a)</p>
<p>重启容器：</p>
<p>docker restart &lt;CONTAINER ID(容器ID或者name)&gt;</p>
<p>docker restart 8ce96564e511 (server)</p>
<p>docker restart 2760297a6a3a (client)</p>
<p>docker restart 47ced0308b10（nginx）</p>
<p>进入正在运行的容器：</p>
<p>docker attach 容器ID /bin/bash</p>
<p>docker attach 8ce96564e511 (server)</p>
<p>docker attach 2760297a6a3a (client)</p>
<p>docker attach 47ced0308b10（nginx）</p>
<p>docker exec -it mynginx /bin/bash</p>
<p>从容器中拷贝文件到主机上：</p>
<p>docker cp 容器ID：容器内路径 目的主机路径</p>
<p>docker cp 8ce96564e51:/server/server.py /root/homework/docker/socket (server)</p>
<p>docker cp 2760297a6a3a:/client/client.py /root/homework/docker/socket (client)</p>
<p>docker cp  /var/www/html/* 47ced0308b10:/usr/share/nginx/html/</p>
<p>导出容器:</p>
<p>docker export 容器ID &gt; name.tar</p>
<p>docker export 8ce96564e51 &gt;/root/homework/docker/ubuntu.docker/server.tar</p>
<p>docker export 2760297a6a3a &gt;/root/homework/docker/ubuntu.docker/client.tar</p>
<p>提交新的Docker镜像实例:</p>
<p>docker commit -m &ldquo;added Node.js&rdquo; -a  &ldquo;name&rdquo; <IMAGE ID> <REPOSITORY></p>
<p>docker commit -m &ldquo;added Node.js&rdquo; -a  &ldquo;cailme&rdquo; 8d8d40459952 client-ubuntu</p>
<p>docker commit -m &ldquo;added Node.js&rdquo; -a  &ldquo;cailme&rdquo; ed70ed5c822f server-ubuntu</p>
<p>运行socket：</p>
<p>python3 ./server.py</p>
<p>python3 ./client.pymkdir</p>
<p>导出容器：</p>
<p>docker export 8ce96564e51 &gt; /root/homework/docker/ubuntu.docker/server.tar</p>
<p>docker export 2760297a6a3a &gt; /root/homework/docker/ubuntu.docker/client.tar</p>
<p>hugo：</p>
<p>查看 Hugo 版本：hugo version</p>
<p>创建个人网站：hugo new site my-blog</p>
<p>克隆主题：git clone <a href="https://github.com/avianto/hugo-kiera">https://github.com/avianto/hugo-kiera</a> kiera</p>
<p>配置config文件：cp themes/kiera/exampleSite/config.toml .</p>
<p>创建文章：hugo new posts/helloworld.md</p>
<p>启动hugo服务：hugo server -D</p>
<p>编译网站：hugo -t themes-name</p>
<p>访问http://localhost:1313</p>
<ul>
<li></li>
</ul>
  </div>
  <footer>
  <p>
  &copy; 2022 龙雪亮 cailme.
  Powered by <a href="https://gohugo.io/">Hugo</a>
  using the <a href="https://github.com/koirand/pulp/">pulp</a> theme.
  </p>
</footer>


  </body>
</html>
